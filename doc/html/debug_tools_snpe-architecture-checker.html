<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2016-2018 Qualcomm Technologies, Inc.
  All Rights Reserved.
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
-->
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"></meta>
<meta http-equiv="X-UA-Compatible" content="IE=9"></meta>
<title>Snapdragon Neural Processing Engine SDK: Architecture Checker (Experimental)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="autoEnterCurrentDate.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="is.css" rel="stylesheet" type="text/css" ></link>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Snapdragon Neural Processing Engine SDK
   <span id="projectnumber"></span></div>
   <div id="projectbrief">Reference Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('debug_tools_snpe-architecture-checker.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Architecture Checker (Experimental) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Architecture checker is a tool made for models running with HTP backend, including quantized 8-bit, quantized 16-bit and FP16 models. It outputs a list of issues in the model that keep the model from getting better performance while running on the HTP backend.</p>
<pre class="fragment">usage: snpe-architecture-checker [-h] -i INPUT_DLC [-o OUTPUT_PATH]

required arguments:
  -i INPUT_DLC, --input_dlc INPUT_DLC
                        Path to a DLC file

optional arguments:
  -o OUTPUT_PATH, --output_path OUTPUT_PATH
                        Path where the output csv should be saved. If not
                        specified, the output csv will be written to the same
                        path as the input dlc file
</pre><p>The output is a csv file and will be saved as &lt;OUTPUT_PATH&gt;_architecture_checker.csv.</p>
<p><a class="anchor" id="tbl_arch_checker_output"></a> <p><table class="doxtable" width="100%">  <caption align="top" class="caption">model_architecture_checker.csv</caption>  <tr>  <th colspan="1"> </th>  <th colspan="1">Graph/Layer name</th>  <th colspan="1">Issue </th>  <th colspan="1">Recommendation </th>  <th colspan="1">Type </th>  <th colspan="1">Input_tensor_name:[dims]</th>  <th colspan="1">Output_tensor_name:[dims]</th>  <th colspan="1">Parameters</th>  <th colspan="1">Previous layer</th>  <th colspan="1">Next layers</th>  </tr>      <tr>  <td> 1 </td>  <td> Graph </td>  <td> This model uses 16-bit activation data. 16-bit activation data takes twice the amount of memory than 8-bit activation data does. </td>  <td> Try to use a smaller datatype to get better performance. E.g., 8-bit </td>  <td> N/A </td>  <td> N/A </td>  <td> N/A </td>  <td> N/A </td>  <td> N/A </td>  <td> N/A </td>  </tr>  <tr>  <td> 2 </td>  <td> Layer_name_1 </td>  <td> The number of channels in the input/output tensor of this convolution is low (smaller than 32). </td>  <td> Try increasing the number of channels in the input/output tensor to 32 or greater to get better performance. </td>  <td> Conv2d </td>  <td> input_1:[1, 250, 250, 3], __param_1:[5, 5, 3, 32], convolution_0_bias:[32] </td>  <td> output_1:[1, 123, 123, 32] </td>  <td> {'dilation': '[1, 1]', 'group': 1, 'pad_amount': '[[1, 1], [1, 1]]', 'stride': '[1, 1]'} </td>  <td> ['previous_layer_name'] </td>  <td> ['next_layer_name1', 'next_layer_name2'] </td>  </tr>  </table></p><p><b>How to read the example output csv?</b> <br />
Row 1: This is an issue on the graph, the graph is using 16-bit activation data, as said in the recommendation, changing the activation from 16 bit to 8 bit gives better performance. <br />
Row 2: The issue is on the layer which the name is "Layer_name_1". This layer has three inputs: input_1, __param_1 and convolution_0_bias where the dimensions are [1, 250, 250, 3], [5, 5, 3, 32] and [32] respectively. This layer has one output with tensor name output_1 and the dimension of this tensor is [1, 123, 123, 32]. The issue for this layer is the channel of the input tensor is low, as the channel is smaller than 32, would recommend to increase the channel to at least 32 to get better performance on HTP backend. Currently the input dimension is [1, 250, 250, 3] and ideally have that to be [1, x, x, 32].</p>
<p><b>Is the layer/tensor name the same in the original model?</b> <br />
It might not be the same but should be similar. The input tensor, output tensor, parameters and previous/next layers are avaliable in the output csv file to help locate the correct node inside the original model. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  Copyright (c) 2016-2018 Qualcomm Technologies, Inc.
  All Rights Reserved.
  Confidential and Proprietary - Qualcomm Technologies, Inc.
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 -->
<!-- start footer part -->
<div id="nav-path" class="navpath" font-size:small;><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <p align="right">
        80-NL315-14 A <br>
        MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION
        <!--If the Controlled Distribution statement is to be included, uncomment below:-->
        <!--<b>Controlled Distribution - DO NOT COPY</b>-->
        <img class="footer" width:5%; alt="QTI Logo" src="images/QTI_Logo.png" />
      </p>
    </li>
  </ul>
</div>
</body>
</html>
